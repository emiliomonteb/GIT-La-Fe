<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía de Intercambio Terapéutico - HUP La Fe</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
            padding-top: 20px;
            padding-bottom: 40px;
        }
        .container {
            max-width: 1100px;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            color: #005a87;
            border-bottom: 2px solid #005a87;
            padding-bottom: 10px;
        }
        .result-item {
            background-color: #f9f9f9;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 4px;
            border-left: 4px solid #005a87;
        }
        .med-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        .med-table th {
            background-color: #e6f2f8;
            padding: 10px;
            text-align: left;
        }
        .med-table td {
            padding: 10px;
            border-top: 1px solid #ddd;
        }
        .loading {
            text-align: center;
            padding: 20px;
        }
        .loading-spinner {
            width: 3rem;
            height: 3rem;
        }
        .non-intercambiable {
            color: #dc3545;
            font-weight: bold;
        }
        .search-filters {
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .filter-btn {
            padding: 6px 12px;
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
        }
        .filter-btn.active {
            background-color: #005a87;
            color: white;
            border-color: #005a87;
        }
        .info-icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-color: #005a87;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            margin-left: 5px;
            cursor: help;
        }
        .github-link {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #333;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            position: absolute;
            top: 20px;
            right: 20px;
        }
        .github-link:hover {
            background-color: #f1f1f1;
        }
        .github-icon {
            width: 20px;
            height: 20px;
        }
        #pagination {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }
        .pagination-btn {
            margin: 0 5px;
        }
        #loadingMessage {
            display: none;
            text-align: center;
            padding: 20px;
        }
    </style>
</head>
<body>
    <div class="container position-relative">
        <a href="https://github.com/username/GIT-La-Fe" target="_blank" class="github-link">
            <svg class="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
            Ver en GitHub
        </a>

        <header>
            <h1>Guía de Intercambio Terapéutico</h1>
            <h2>Hospital Universitari i Politècnic La Fe</h2>
        </header>

        <div class="search-container mb-4">
            <h3>Buscar equivalente terapéutico</h3>
            <p>Introduzca el nombre del medicamento (principio activo o marca comercial) no incluido en el hospital:</p>
            
            <div class="input-group mb-3">
                <input type="text" id="searchInput" class="form-control" placeholder="Ej: Omeprazol, Paracetamol, Atenolol...">
                <button class="btn btn-primary" id="searchBtn">Buscar</button>
            </div>
            
            <div class="d-flex align-items-center">
                <small class="text-muted">Base de datos completa de la 3ª ed. 2012 de la Guía para el Intercambio Terapéutico</small>
                <span class="info-icon ms-2" data-bs-toggle="tooltip" data-bs-placement="right" title="Esta herramienta permite buscar equivalentes terapéuticos para medicamentos no incluidos en la Guía Farmacoterapéutica del hospital. Basado en la 3ª edición de la Guía para el Intercambio Terapéutico - Comisión de Farmacia y Terapéutica - HUP La Fe (2012).">i</span>
            </div>
        </div>

        <div class="search-filters" id="filters">
            <span class="me-2">Filtrar por grupo:</span>
            <button class="filter-btn active" data-filter="all">Todos</button>
            <!-- Los filtros se añadirán dinámicamente con JavaScript -->
        </div>

        <div id="loadingMessage" class="alert alert-info">
            <div class="spinner-border spinner-border-sm me-2" role="status">
                <span class="visually-hidden">Cargando...</span>
            </div>
            Cargando datos de la guía...
        </div>

        <div id="results">
            <!-- Los resultados de búsqueda se mostrarán aquí -->
        </div>

        <div id="pagination" class="mt-4">
            <!-- La paginación se añadirá dinámicamente -->
        </div>

        <footer class="mt-5 text-center text-muted">
            <p>Basado en la Guía para el Intercambio Terapéutico - 3ª ed. 2012 - Comisión de Farmacia y Terapéutica - HUP La Fe</p>
            <p><small>Esta aplicación es solo una herramienta de consulta. Siempre verifique la información con la guía oficial.</small></p>
        </footer>
    </div>

    <!-- Modal para ver detalles completos del medicamento -->
    <div class="modal fade" id="medicamentoModal" tabindex="-1" aria-labelledby="medicamentoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="medicamentoModalLabel">Detalles del Medicamento</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="medicamentoModalBody">
                    <!-- Contenido del modal -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // URL del archivo JSON con los datos de la guía
        const DATABASE_URL = 'https://raw.githubusercontent.com/username/GIT-La-Fe/main/database.json';
        
        // Variables globales
        let medicamentosDB = [];
        let currentResults = [];
        let currentFilter = 'all';
        let currentPage = 1;
        const itemsPerPage = 10;
        
        // Inicialización de tooltips de Bootstrap
        const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });

        // Mostrar indicador de carga
        document.getElementById('loadingMessage').style.display = 'block';

        // Cargar datos desde el JSON
        async function loadData() {
            try {
                /* 
                En producción, descomenta esto para cargar datos del GitHub:
                const response = await fetch(DATABASE_URL);
                medicamentosDB = await response.json();
                */
                
                // Para la demostración, usamos datos estáticos:
                medicamentosDB = [
                    {
                        grupo: "A",
                        nombreGrupo: "APARATO DIGESTIVO Y METABOLISMO",
                        subgrupo: "A02",
                        nombreSubgrupo: "ANTIÁCIDOS, ANTIULCEROSOS Y ANTIFLATULENTOS",
                        principioActivo: "FAMOTIDINA",
                        marcasNoIncluidas: "VARIOS 20 y 40 mg COMP",
                        posologiaNoIncluida: "20 mg/12 h, 40 mg/24 h",
                        principioRecomendado: "RANITIDINA",
                        marcasRecomendadas: "RANITIDINA 150 mg COMP",
                        posologiaRecomendada: "1-0-1, 0-0-2",
                        noIntercambiable: false,
                        notas: ""
                    },
                    {
                        grupo: "A",
                        nombreGrupo: "APARATO DIGESTIVO Y METABOLISMO",
                        subgrupo: "A02",
                        nombreSubgrupo: "ANTIÁCIDOS, ANTIULCEROSOS Y ANTIFLATULENTOS",
                        principioActivo: "ESOMEPRAZOL",
                        marcasNoIncluidas: "AXIAGO, NEXIUM MUPS 20 y 40 mg COMP",
                        posologiaNoIncluida: "20-40 mg C/24 h",
                        principioRecomendado: "OMEPRAZOL",
                        marcasRecomendadas: "",
                        posologiaRecomendada: "20-40 mg C/24 h",
                        noIntercambiable: false,
                        notas: "Para Pediatría está disponible OMEPRAZOL 40 mg VIAL"
                    },
                    {
                        grupo: "A",
                        nombreGrupo: "APARATO DIGESTIVO Y METABOLISMO",
                        subgrupo: "A02",
                        nombreSubgrupo: "ANTIÁCIDOS, ANTIULCEROSOS Y ANTIFLATULENTOS",
                        principioActivo: "LANSOPRAZOL",
                        marcasNoIncluidas: "ESTOMIL, MONOLITUM, LANZOL, OPIREN, PRO ULCO, PROTONER 15 y 30 mg CÁPS",
                        posologiaNoIncluida: "15-30 mg C/24 h",
                        principioRecomendado: "OMEPRAZOL",
                        marcasRecomendadas: "",
                        posologiaRecomendada: "20-40 mg C/24 h",
                        noIntercambiable: false,
                        notas: "En caso de interacciones relevantes (Clopidogrel) es preferible el PANTOPRAZOL COMP 40 mg C/24H"
                    },
                    {
                        grupo: "A",
                        nombreGrupo: "APARATO DIGESTIVO Y METABOLISMO",
                        subgrupo: "A03",
                        nombreSubgrupo: "FÁRMACOS PARA ALTERACIONES INTESTINALES FUNCIONALES GASTROINTESTINALES",
                        principioActivo: "CINITAPRIDA",
                        marcasNoIncluidas: "BLASTON, CIDINE 1 mg COMP y SOBRES SOL 1 mg/5 ml",
                        posologiaNoIncluida: "",
                        principioRecomendado: "",
                        marcasRecomendadas: "",
                        posologiaRecomendada: "",
                        noIntercambiable: true,
                        notas: ""
                    },
                    {
                        grupo: "C",
                        nombreGrupo: "APARATO CARDIOVASCULAR",
                        subgrupo: "C01",
                        nombreSubgrupo: "TERAPIA CARDÍACA",
                        principioActivo: "NITROGLICERINA",
                        marcasNoIncluidas: "VARIOS PARCHES 5, 10 y 15 mg",
                        posologiaNoIncluida: "",
                        principioRecomendado: "NITROGLICERINA",
                        marcasRecomendadas: "NITRODERM MATRIX PARCHES 5, 10 y 15 mg",
                        posologiaRecomendada: "",
                        noIntercambiable: false,
                        notas: ""
                    },
                    {
                        grupo: "M",
                        nombreGrupo: "APARATO LOCOMOTOR",
                        subgrupo: "M01",
                        nombreSubgrupo: "ANTIINFLAMATORIOS Y ANTIRREUMÁTICOS",
                        principioActivo: "CELECOXIB",
                        marcasNoIncluidas: "ARTILOG, CELEBREX 200 mg CÁPS",
                        posologiaNoIncluida: "200 mg C/24H",
                        principioRecomendado: "MELOXICAM",
                        marcasRecomendadas: "MOVALIS 7,5 mg COMP",
                        posologiaRecomendada: "7,5 mg/24 h",
                        noIntercambiable: false,
                        notas: ""
                    },
                    {
                        grupo: "J",
                        nombreGrupo: "TERAPIA ANTIINFECCIOSA",
                        subgrupo: "J01",
                        nombreSubgrupo: "ANTIBACTERIANOS USO SISTÉMICO",
                        principioActivo: "CEFPODOXIMA",
                        marcasNoIncluidas: "INSTANA, OTREON 200 mg/12 h",
                        posologiaNoIncluida: "200 mg/12 h",
                        principioRecomendado: "CEFIXIMA",
                        marcasRecomendadas: "DENVAR 200 mg CAPS",
                        posologiaRecomendada: "200 mg C/12 h",
                        noIntercambiable: false,
                        notas: ""
                    },
                    {
                        grupo: "N",
                        nombreGrupo: "SISTEMA NERVIOSO",
                        subgrupo: "N05",
                        nombreSubgrupo: "PSICOLÉPTICOS",
                        principioActivo: "TETRAZEPAM",
                        marcasNoIncluidas: "MYOLASTAN 50 mg COMP",
                        posologiaNoIncluida: "",
                        principioRecomendado: "",
                        marcasRecomendadas: "",
                        posologiaRecomendada: "",
                        noIntercambiable: true,
                        notas: "aunque diazepam de 5 y 10 mg puede ser una alternativa"
                    },
                    {
                        grupo: "B",
                        nombreGrupo: "SANGRE Y ÓRGANOS HEMATOPOYÉTICOS",
                        subgrupo: "B01",
                        nombreSubgrupo: "ANTITROMBÓTICOS",
                        principioActivo: "ACETILSALICÍLICO ÁCIDO",
                        marcasNoIncluidas: "AAS 100 mg COMP, BIPLAK 125 mg COMP, TROMALYT 150 mg",
                        posologiaNoIncluida: "",
                        principioRecomendado: "ACETILSALICÍLICO ACIDO",
                        marcasRecomendadas: "ADIRO 100 mg COMP",
                        posologiaRecomendada: "1-0-0",
                        noIntercambiable: false,
                        notas: ""
                    },
                    {
                        grupo: "R",
                        nombreGrupo: "APARATO RESPIRATORIO",
                        subgrupo: "R03",
                        nombreSubgrupo: "ANTIASMÁTICOS",
                        principioActivo: "FORMOTEROL",
                        marcasNoIncluidas: "BRONCORAL, FORADIL, FORMATRIS, NEBLIK 12 mcg PULS",
                        posologiaNoIncluida: "12 mcg C/12 h",
                        principioRecomendado: "SALBUTAMOL",
                        marcasRecomendadas: "VENTOLIN 100 MCG/INH",
                        posologiaRecomendada: "1-2 INH/6-8 h",
                        noIntercambiable: false,
                        notas: ""
                    },
                    {
                        grupo: "S",
                        nombreGrupo: "ÓRGANOS DE LOS SENTIDOS",
                        subgrupo: "S01",
                        nombreSubgrupo: "OFTALMOLÓGICOS",
                        principioActivo: "BRIMONIDINA",
                        marcasNoIncluidas: "ALPHAGAN",
                        posologiaNoIncluida: "1 gota/8 h",
                        principioRecomendado: "",
                        marcasRecomendadas: "",
                        posologiaRecomendada: "",
                        noIntercambiable: true,
                        notas: ""
                    },
                    {
                        grupo: "L",
                        nombreGrupo: "TERAPIA ANTINEOPLÁSICA Y AGENTES INMUNOMODULADORES",
                        subgrupo: "L01",
                        nombreSubgrupo: "CITOSTÁTICOS",
                        principioActivo: "VARIOS CITOSTÁTICOS",
                        marcasNoIncluidas: "",
                        posologiaNoIncluida: "",
                        principioRecomendado: "",
                        marcasRecomendadas: "",
                        posologiaRecomendada: "",
                        noIntercambiable: true,
                        notas: "No intercambiables. Utilización según esquemas quimioterápicos establecidos."
                    }
                ];
                
                // Ocultar indicador de carga
                document.getElementById('loadingMessage').style.display = 'none';
                
                // Inicializar filtros por grupo
                initializeFilters();
            } catch (error) {
                console.error('Error al cargar los datos:', error);
                document.getElementById('loadingMessage').style.display = 'none';
                document.getElementById('results').innerHTML = `
                    <div class="alert alert-danger">
                        Error al cargar los datos. Por favor, intente nuevamente más tarde.
                    </div>
                `;
            }
        }

        // Inicializar filtros basados en los grupos disponibles
        function initializeFilters() {
            const filtersContainer = document.getElementById('filters');
            const groupsSet = new Set();
            
            medicamentosDB.forEach(med => {
                if (med.grupo) {
                    groupsSet.add(med.grupo);
                }
            });
            
            const groups = Array.from(groupsSet).sort();
            
            groups.forEach(group => {
                const groupName = medicamentosDB.find(med => med.grupo === group)?.nombreGrupo || group;
                const filterBtn = document.createElement('button');
                filterBtn.className = 'filter-btn';
                filterBtn.setAttribute('data-filter', group);
                filterBtn.textContent = `${group}: ${groupName}`;
                
                filterBtn.addEventListener('click', () => {
                    // Desactivar todos los botones
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // Activar el botón actual
                    filterBtn.classList.add('active');
                    
                    // Aplicar filtro
                    currentFilter = group;
                    applyFilter();
                });
                
                filtersContainer.appendChild(filterBtn);
            });
        }

        // Aplicar filtro actual y actualizar resultados
        function applyFilter() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (searchTerm.length > 0) {
                // Si hay un término de búsqueda, aplicar el filtro a los resultados
                buscarMedicamento();
            } else {
                // Si no hay término de búsqueda, mostrar todos los medicamentos con el filtro actual
                currentResults = medicamentosDB.filter(med => 
                    currentFilter === 'all' || med.grupo === currentFilter
                );
                
                currentPage = 1;
                updateResultsDisplay();
            }
        }

        // Función para buscar medicamentos
        function buscarMedicamento() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (searchTerm.length < 2) {
                document.getElementById('results').innerHTML = `
                    <div class="alert alert-warning">
                        Por favor, introduzca al menos 2 caracteres para buscar.
                    </div>
                `;
                return;
            }
            
            // Filtrar medicamentos que coincidan con la búsqueda y el filtro actual
            currentResults = medicamentosDB.filter(med => 
                (med.principioActivo.toLowerCase().includes(searchTerm) || 
                med.marcasNoIncluidas.toLowerCase().includes(searchTerm) ||
                (med.principioRecomendado && med.principioRecomendado.toLowerCase().includes(searchTerm)) ||
                (med.marcasRecomendadas && med.marcasRecomendadas.toLowerCase().includes(searchTerm))) &&
                (currentFilter === 'all' || med.grupo === currentFilter)
            );
            
            currentPage = 1;
            updateResultsDisplay();
        }

        // Actualizar visualización de resultados con paginación
        function updateResultsDisplay() {
            const resultsContainer = document.getElementById('results');
            
            if (currentResults.length === 0) {
                resultsContainer.innerHTML = `
                    <div class="alert alert-info">
                        No se encontraron medicamentos que coincidan con su búsqueda. Intente con otro término o consulte la guía completa.
                    </div>
                `;
                document.getElementById('pagination').innerHTML = '';
                return;
            }
            
            // Calcular páginas
            const totalPages = Math.ceil(currentResults.length / itemsPerPage);
            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = Math.min(startIndex + itemsPerPage, currentResults.length);
            
            // Obtener medicamentos para la página actual
            const medicamentosActuales = currentResults.slice(startIndex, endIndex);
            
            // Generar HTML para resultados
            let htmlResultados = `
                <h3>Resultados (${currentResults.length} medicamentos encontrados)</h3>
                <p>Mostrando ${startIndex + 1} - ${endIndex} de ${currentResults.length}</p>
            `;
            
            medicamentosActuales.forEach((med, index) => {
                htmlResultados += `
                    <div class="result-item">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h4>${med.principioActivo}</h4>
                            <span class="badge bg-secondary">${med.grupo}: ${med.nombreGrupo}</span>
                        </div>
                        <div class="mb-2">
                            <small class="text-muted">${med.subgrupo}: ${med.nombreSubgrupo}</small>
                        </div>
                        <table class="med-table">
                            <tr>
                                <th colspan="2">Medicamento no incluido en el hospital</th>
                                <th colspan="2">Medicamento recomendado disponible</th>
                            </tr>
                            <tr>
                                <td><strong>Principio activo:</strong></td>
                                <td>${med.principioActivo}</td>
                                <td><strong>Principio activo:</strong></td>
                                <td>${med.noIntercambiable ? '<span class="non-intercambiable">NO INTERCAMBIABLE</span>' : med.principioRecomendado}</td>
                            </tr>
                            <tr>
                                <td><strong>Marcas comerciales:</strong></td>
                                <td>${med.marcasNoIncluidas}</td>
                                <td><strong>Marcas comerciales:</strong></td>
                                <td>${med.marcasRecomendadas}</td>
                            </tr>
                            ${med.posologiaNoIncluida || med.posologiaRecomendada ? `
                            <tr>
                                <td><strong>Posología habitual:</strong></td>
                                <td>${med.posologiaNoIncluida}</td>
                                <td><strong>Posología habitual:</strong></td>
                                <td>${med.posologiaRecomendada}</td>
                            </tr>` : ''}
                            ${med.notas ? `
                            <tr>
                                <td colspan="4"><strong>Notas:</strong> ${med.notas}</td>
                            </tr>` : ''}
                        </table>
                    </div>
                `;
            });
            
            resultsContainer.innerHTML = htmlResultados;
            
            // Actualizar paginación
            updatePagination(totalPages);
        }

        // Actualizar controles de paginación
        function updatePagination(totalPages) {
            const paginationContainer = document.getElementById('pagination');
            
            if (totalPages <= 1) {
                paginationContainer.innerHTML = '';
                return;
            }
            
            let paginationHTML = '<nav><ul class="pagination justify-content-center">';
            
            // Botón anterior
            paginationHTML += `
                <li class="page-item ${currentPage === 1 ? 'disabled' : ''}">
                    <button class="page-link" id="prevPage" ${currentPage === 1 ? 'disabled' : ''}>Anterior</button>
                </li>
            `;
            
            // Páginas numéricas
            const maxVisiblePages = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
            let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
            
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            if (startPage > 1) {
                paginationHTML += `
                    <li class="page-item">
                        <button class="page-link" data-page="1">1</button>
                    </li>
                    ${startPage > 2 ? '<li class="page-item disabled"><span class="page-link">...</span></li>' : ''}
                `;
            }
            
            for (let i = startPage; i <= endPage; i++) {
                paginationHTML += `
                    <li class="page-item ${i === currentPage ? 'active' : ''}">
                        <button class="page-link" data-page="${i}">${i}</button>
                    </li>
                `;
            }
            
            if (endPage < totalPages) {
                paginationHTML += `
                    ${endPage < totalPages - 1 ? '<li class="page-item disabled"><span class="page-link">...</span></li>' : ''}
                    <li class="page-item">
                        <button class="page-link" data-page="${totalPages}">${totalPages}</button>
                    </li>
                `;
            }
            
            // Botón siguiente
            paginationHTML += `
                <li class="page-item ${currentPage === totalPages ? 'disabled' : ''}">
                    <button class="page-link" id="nextPage" ${currentPage === totalPages ? 'disabled' : ''}>Siguiente</button>
                </li>
            `;
            
            paginationHTML += '</ul></nav>';
            paginationContainer.innerHTML = paginationHTML;
            
            // Evento de clic para botón anterior
            const prevPageBtn = document.getElementById('prevPage');
            if (prevPageBtn) {
                prevPageBtn.addEventListener('click', () => {
                    if (currentPage > 1) {
                        currentPage--;
                        updateResultsDisplay();
                    }
                });
            }
            
            // Evento de clic para botón siguiente
            const nextPageBtn = document.getElementById('nextPage');
            if (nextPageBtn) {
                nextPageBtn.addEventListener('click', () => {
                    if (currentPage < totalPages) {
                        currentPage++;
                        updateResultsDisplay();
                    }
                });
            }
            
            // Eventos de clic para botones de página numérica
            document.querySelectorAll('.page-link[data-page]').forEach(button => {
                button.addEventListener('click', (e) => {
                    const page = parseInt(e.target.getAttribute('data-page'));
                    currentPage = page;
                    updateResultsDisplay();
                    // Scroll hacia arriba
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });
        }

        // Extraer datos de la guía a formato JSON
        function extractDataFromGuide() {
            // Esta función simularía la extracción de datos del PDF
            // En realidad, este procesamiento se haría offline y se guardaría en el repositorio
            
            // Ejemplo de estructura:
            const extractedData = [
                {
                    grupo: "A",
                    nombreGrupo: "APARATO DIGESTIVO Y METABOLISMO",
                    subgrupo: "A02",
                    nombreSubgrupo: "ANTIÁCIDOS, ANTIULCEROSOS Y ANTIFLATULENTOS",
                    principioActivo: "ESOMEPRAZOL",
                    marcasNoIncluidas: "AXIAGO, NEXIUM MUPS 20 y 40 mg COMP",
                    posologiaNoIncluida: "20-40 mg C/24 h",
                    principioRecomendado: "OMEPRAZOL",
                    marcasRecomendadas: "",
                    posologiaRecomendada: "20-40 mg C/24 h",
                    noIntercambiable: false,
                    notas: "Para Pediatría está disponible OMEPRAZOL 40 mg VIAL"
                }
                // Y así con todos los medicamentos...
            ];
            
            return JSON.stringify(extractedData, null, 2);
        }

        // Event listeners
        document.getElementById('searchBtn').addEventListener('click', buscarMedicamento);
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                buscarMedicamento();
            }
        });
        
        // Filtro "Todos"
        document.querySelector('.filter-btn[data-filter="all"]').addEventListener('click', () => {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.filter-btn[data-filter="all"]').classList.add('active');
            currentFilter = 'all';
            applyFilter();
        });

        // Iniciar carga de datos
        loadData();
    </script>
</body>
</html>